 Project Overview
ğŸ§ª Project Name: ICFAICOLLAB
ğŸ’» Tech Stack
Backend: Node.js, Express.js, MongoDB (Mongoose)

Authentication:

Local: JWT (HTTP-only cookies), bcrypt for password hashing

OAuth: Google OAuth 2.0 with Passport.js

Frontend: Plain HTML, CSS, JavaScript (no templating engine like EJS)

File Uploads: Handled by Multer (stored in /uploads)

OAuth Strategy: Passport.js with Google OAuth2

ğŸ§  Main Features
âœ… User Authentication
Signup via:

Local: Name, email, password, domain, skills, bio, profile picture

Google OAuth: Name and email are pre-filled, then profile completion step collects domain, skills, bio, and optional profile picture

Passwords hashed using bcrypt

JWT generated and stored in HTTP-only cookies

Auth middleware sets req.user using decoded token

Role-based access: 'user' vs 'admin'

ğŸ“¦ Project Management
Users can upload projects with file attachments (image/video/zip)

Each project includes:

title, description, domain, file URL

Projects displayed in user's dashboard

ğŸ“¢ Ad Management + Join Requests
Users can create ads with:

title, description, domain

Other users can apply by sending join requests

Join request has:

user reference and a status: pending, accepted, or declined

Ad owner can:

view incoming join requests

accept or decline them

Applicant can:

view their sent requests and status

ğŸ§‘â€ğŸ’¼ Dashboard (user.html)
Displays:

User profile details

Uploaded projects

"My Team Ads" (ads created by the user)

"Join Requests Received" (with Accept/Decline buttons)

"My Join Requests" (status of ads user applied to)

ğŸ–¼ï¸ Profile Completion Flow (For Google OAuth)
Google OAuth signup auto-creates a minimal user (name, email, no password)

Redirects to signup.html?google=true

Profile completion form collects:

username, bio, domain, skills, profilePic

This hits PUT /api/users/update with upload.single('profilePic')

The JWT cookie is already set from Google OAuth callback

ğŸ”€ Key Routes (API)
Route	Method	Description
/api/users/signup	POST	Local signup with multipart/form-data
/api/users/login	POST	Login with email & password
/api/users/logout	POST	Clear token cookie
/api/users/me	GET	Get current user
/api/users/update	PUT	Update user (Google profile completion)
/auth/google	GET	Trigger Google OAuth
/auth/google/callback	GET	Google OAuth callback
/api/projects/upload	POST	Upload a project with file
/api/projects/my-projects	GET	Get current user's projects
/api/ads/create	POST	Create new ad
/api/ads	GET	View all ads
/api/ads/my-ads	GET	View ads created by user
/api/ads/:adId/join	POST	Send join request
/api/ads/:adId/join/:requesterId/accept	PUT	Accept join request
/api/ads/:adId/join/:requesterId/decline	PUT	Decline join request
/api/ads/my-join-requests	GET	Join requests received (ad owner)
/api/ads/my-join-requests-applicant	GET	Join requests sent (applicant)

ğŸ“ Folder Structure
pgsql
Copy
Edit
API-COPY/
â”œâ”€â”€ node_modules/
â”œâ”€â”€ public/                     # Frontend HTML pages
â”‚   â”œâ”€â”€ about.html
â”‚   â”œâ”€â”€ ads.html
â”‚   â”œâ”€â”€ all-user.html
â”‚   â”œâ”€â”€ landing.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ profile.html
â”‚   â”œâ”€â”€ settings.html
â”‚   â”œâ”€â”€ signup.html             # Local + Google signup handled via modals
â”‚   â”œâ”€â”€ upload.html
â”‚   â”œâ”€â”€ user.html               # User dashboard
â”‚   â”œâ”€â”€ view-ads.html
â”‚   â”œâ”€â”€ view-project.html
â”‚   â””â”€â”€ view-projects.html
â”‚
â”œâ”€â”€ uploads/                    # Multer file storage
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.js                  # Main Express app setup
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ db.js               # MongoDB connection
â”‚   â”‚   â”œâ”€â”€ passport.js         # Google OAuth via Passport.js
â”‚   â”‚   â”œâ”€â”€ cloudinary.js       # (Optional) Cloudinary upload config
â”‚   â”‚   â””â”€â”€ prompt.txt
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ ad.controller.js
â”‚   â”‚   â”œâ”€â”€ auth.controller.js
â”‚   â”‚   â”œâ”€â”€ project.controller.js
â”‚   â”‚   â””â”€â”€ user.controller.js
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â”œâ”€â”€ auth.middleware.js  # JWT verification
â”‚   â”‚   â””â”€â”€ error.middleware.js
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ ad.model.js
â”‚   â”‚   â”œâ”€â”€ project.model.js
â”‚   â”‚   â””â”€â”€ user.model.js
â”‚   â””â”€â”€ routes/
â”‚       â”œâ”€â”€ ad.routes.js
â”‚       â”œâ”€â”€ auth.routes.js
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ project.routes.js
â”‚       â””â”€â”€ user.routes.js
â”‚
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â””â”€â”€ server.js                   # Loads app.js and connects DB

âœ¨ Google OAuth Flow
User clicks â€œSign up with Googleâ€

Redirects to /auth/google

User signs in via Google

googleStrategy.js checks if user exists:

If not, creates stub user with email, name

No password required for Google users

JWT is issued and stored as cookie

Redirects to signup.html?google=true

User fills in profile â†’ submits to PUT /api/users/update with Multer for profilePic
ğŸ§ª Debugging Notes
Always verify that req.user is set from the JWT middleware

For ObjectId comparison, always convert using .toString() if needed

Multer is configured for profilePic and project file uploads

Google users donâ€™t have passwords, so login with email+password only works for local accounts